# 什么是 MS Azure 函数？

> 原文:[https://www.javatpoint.com/what-is-ms-azure-functions](https://www.javatpoint.com/what-is-ms-azure-functions)

为了编写更少的代码，管理更少的基础设施，并节省资金，我们可以使用 Azure Functions，这是一个无服务器计算平台。云架构提供了保持应用程序运行所需的所有当前资源，而不是担心建立和管理服务器。

Azure Functions 负责剩下的一切，我们只需专注于对我们最重要的代码。

我们经常设计系统来应对一系列关键事件。每个应用程序，无论是创建网络应用编程接口、响应数据库更新、处理物联网数据流，还是仅仅维护消息队列，都需要一种在事件发生时运行代码的方法。

“按需计算”在 Azure Functions 中根据需要以两种方式提供。

首先，Azure 函数使您能够将系统的逻辑转化为易于访问的代码块。“函数”是这些代码块的名称。当您需要响应重大事件时，可以随时激活各种功能。

其次，当需求增长时，Azure Functions 会扩大规模，以提供所需数量的资源和功能实例，但仅限于需要时。随着需求的减少，任何多余的资源和应用程序实例都会立即退役。

所有计算资源的来源是什么？Azure Functions 可以根据您的需要提供任意多或任意少的计算资源，以满足您的应用程序需求。

无服务器计算被定义为在 Azure Functions 中按需提供计算资源。

## 情节

一个功能可以与各种云服务接口，以在各种场景中提供功能丰富的实现。

下面列出的场景是 Azure Functions 场景的一个流行但并非详尽的集合。

| 如果你想的话... | 然后... |
| **建立网络应用编程接口** | 使用 HTTP 触发器，为您的网络应用程序创建一个端点。 |
| **流程文件上传** | 在 blob 存储中上传或更新文件时，运行代码。 |
| **建立无服务器工作流程** | 使用持久函数，将多个函数链接在一起。 |
| **响应数据库变更** | 当在宇宙数据库中创建或更改文档时，运行自定义逻辑。 |
| **运行计划任务** | 以预定的时间间隔运行代码。 |
| **创建可靠的消息队列系统** | 队列存储、服务总线或事件集线器都可以用来处理消息队列。 |
| **分析物联网数据流** | 来自物联网设备的数据被收集和处理。 |
| **实时处理数据** | 使用信号和函数对数据做出实时反应。 |

开发功能时，您可以访问以下选项和资源:

*   **使用自己喜欢的语言**:用 C#、Java、JavaScript、PowerShell 或者 Python 创建函数，或者创建一个自定义的处理程序来使用任何语言。
*   **自动化部署**:有许多可用的部署选项，从基于工具的方法到使用外部管道。
*   **对功能进行故障排除**:要深入了解您的应用程序，请使用监控工具和测试方法。
*   **灵活的定价选项**:您只需在功能与消费计划一起运行时为其付费，而高级和应用服务计划则提供专门用途的功能。

Azure 函数使您能够将系统的逻辑转换成易于访问的代码块。“函数”是这些代码块的名称。

## 我们所说的“持久函数”是什么意思？

持久函数是 Azure 函数的无服务器计算扩展，允许您构建有状态函数。使用 Azure Functions 编程模型，您可以通过创建编排器函数来构建有状态的工作流，并通过编写实体函数来创建有状态的实体。

### 支持的语言

持久函数目前支持以下语言:

*   **C#** :预编译类库和 C#脚本都是可用的。
*   **JavaScript** :只支持 Azure Functions 运行时的 2.x 版本。需要 1.7.0 或更高版本的持久函数扩展。
*   **Python** :需要持久函数扩展的 2.3.1 或更高版本。
*   **F#** : F#脚本和预编译类库 Azure Functions 运行时 1.x 版只支持 F#脚本。
*   **PowerShell** :耐久功能支持目前公开预览。需要 2.2.2 或更高版本的持久功能扩展。目前，只支持以下模式:异步 HTTP APIs、函数链接、扇出/扇入。

## 应用模式

持久函数的主要目的是简化无服务器系统中复杂的、有状态的协调需求。我们可以从典型应用程序模式中的持久函数中获得的好处是-

*   聚合器(有状态实体)
*   扇出/扇入
*   异步 HTTP 应用程序接口
*   函数链接
*   监视
*   人类互动

## 模式:函数链接

在函数链模式中，一系列函数以一定的顺序执行。一个函数的输出以这种方式应用于另一个函数的输入。

![What is MS Azure Functions](../Images/69cb8250da6b63e3c74c31f4082b7fa6.png)

如下例所示，我们可以利用持久函数来快速实现函数链模式。

本例中的数字 F1、F2、F3 和 F4 是同一功能应用程序中附加功能的名称。控制流可以使用标准的命令式编码结构来实现。代码的执行从顶部开始，向下进行。我们甚至可以在根据需要编写代码时使用条件语句和不同的循环语句。在 try/catch/finally 块中，我们还可以包含错误处理逻辑。

### 模式:扇出/扇入

您以扇出/扇入模式并行运行许多功能，然后等待它们全部完成。根据函数提供的结果，经常会执行一些聚合工作。

![What is MS Azure Functions](../Images/ab317f02cd01da3ab06779d9b0cd719f.png)

您可以通过让标准函数向一个队列发送几条消息来分散它们。回到原来的位置要困难得多。要加入进来，您需要构建代码来跟踪队列触发函数何时结束，然后将函数输出存储在常规函数中。

F2 函数的扇出任务被划分到多个实例中。任务的动态列表用于跟踪作业。任务。当调用“全部”时，它会等待所有已调用的函数完成。F2 函数的结果然后被组合并从动态任务列表提供给 F3 函数。

使用等待调用调用任务时发生的自动检查点。当全部确保潜在的任务中间崩溃或重新启动不会导致任务重新启动。

### 模式:异步 HTTP 应用程序接口

这种模式解决了外部客户面临的长期活动状态的协调这一重大问题。HTTP 端点是通过触发长时间运行的活动来实现这种模式的常见技术。客户端然后被发送到一个状态端点，它轮询该端点以确定进程何时完成。

![What is MS Azure Functions](../Images/cffc8c75ba680264043de95df7d1f474.png)

持久函数内置了对这种模式的支持，使得它更容易与长时间运行的函数执行交互，甚至消除了编写代码的需要。

持久函数运行时甚至为我们管理状态，所以我们不需要创建自己的状态跟踪方法。

用于管理长时间运行的业务流程的内置 HTTP APIs 是通过持久函数扩展公开的。例如，队列消息可以用来发起终止。

* * *