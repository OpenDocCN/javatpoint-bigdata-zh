# Azure 存储监控

> 原文:[https://www.javatpoint.com/azure-storage-monitoring](https://www.javatpoint.com/azure-storage-monitoring)

Azure 中有两种存储监控功能。

**持续监控:** Azure 提供了不同的指标，这些指标在存储帐户级别和个人服务级别都可用。这些指标每小时收集一次，我们可以根据这些指标定义图表，并将这些图表固定在仪表板上。我们将在下面看到如何做到这一点。

**日志记录:**我们可以使用 Azure 存储客户端库启用客户端日志记录。我们可以使用 Azure 存储分析来允许网络日志记录和服务器日志记录。所有这些日志都可以用来监控个人的事务，以便进行持续监控。这些指标是聚合数据，因此我们无法查看个人的交易。但是通过启用日志记录，我们可以通过进入个人的事务进行调查。

我们用来监控存储的基本工具是音频存储分析，解释如下:

*   Azure 存储分析执行日志记录，并为存储帐户快速提供数据。我们可以使用这些数据来跟踪请求、分析使用趋势以及诊断存储帐户的问题。
*   当我们创建存储帐户时，默认情况下会启用指标。我们可以允许使用 Azure 门户、Rest APIs 或客户端库进行日志记录。度量使用“获取 Blob 服务属性”、“获取队列服务属性”、“获取表服务属性”和“获取文件服务属性”操作来为所有服务启用存储分析。
*   组合数据存储在一个众所周知的 blob(用于日志记录)和众所周知的表(用于度量)中，它们可能使用各自的 API 服务。
*   存储分析对存储数据量有 20 TB 的限制，这与您的存储帐户的总限制无关。

## 存储分析日志记录:

存储分析记录了对存储服务的成功和失败请求的详细信息。这些数据可用于监控单个请求和诊断存储服务的问题。经过身份验证的请求和匿名请求都将被记录，但级别不同。所有日志都存储在名为$logs 的容器内的 blobs 块中，该容器是在存储帐户允许存储分析时自动创建的。容器($logs)位于存储帐户的 blob 命名空间中。

**日志以以下格式写入**

```

<service-name>/YYYY/MM/DD/hhmm/<counter>.log

```

## 存储分析指标

存储分析存储指标，包括与存储服务请求相关的组合事务统计数据和容量数据。有两种类型的存储分析指标。

**交易指标**

*   每小时或每分钟记录的事务聚合数据，如读取、写入、更新等。
*   数据记录在服务级别和 API 操作级别

**容量指标**

*   存储帐户的 Blob 服务每天都会记录容量数据，包括容量容器计数、对象计数等。

每个存储服务的所有指标数据都存储在为该服务保留的三个表中。

![Azure Storage Monitoring](../Images/2daf6fe1cf97e7dc8818ab3f5306e952.png)

* * *