# 创建 IAM 角色

> 原文:[https://www.javatpoint.com/aws-creating-iam-roles](https://www.javatpoint.com/aws-creating-iam-roles)

## 为服务创建 IAM 角色

**使用 AWS 管理控制台为服务创建角色。**

*   在控制台的导航窗格中，单击**角色**，然后单击**“创建角色”**。点击**创建角色**按钮，屏幕显示如下。

![Creating IAM Roles](../Images/c7619ad80f78f5162eba4b774212199b.png)

*   选择您要与角色一起使用的服务。
*   选择将权限附加到服务的托管策略。

![Creating IAM Roles](../Images/deea69f95186658c564f224f0b950069.png)

*   在角色名称框中，输入描述服务角色的角色名称，然后单击“创建角色”。

![Creating IAM Roles](../Images/5774dc766dc6442957d95a2dcc53c18f.png)

**使用命令行界面为服务创建角色**

*   使用控制台创建角色，许多步骤已经为您完成，但是使用 CLI，您可以自己显式执行每个步骤。您必须创建策略，并为角色分配权限策略。
    **要使用 AWS CLI 为 AWS 服务创建角色，请使用以下命令:**
    *   创建角色:aws iam 创建-角色
    *   将权限策略附加到角色:aws iam 放入角色策略
*   如果您使用的是带有实例的角色，例如 Amazon EC2 实例，那么您需要创建一个实例配置文件来存储角色。实例配置文件是角色的容器，但实例配置文件只能包含一个角色。如果使用 AWS 管理控制台创建角色，则已经为您创建了实例配置文件。如果使用 CLI 创建配置文件，则必须自己明确指定每个步骤。
    **要使用 CLI 创建实例配置文件，请使用以下命令:**
    *   创建实例配置文件:aws iam 创建-实例-配置文件
    *   向实例配置文件添加角色:aws iam 向实例配置文件添加角色

## 为 IAM 用户创建 IAM 角色

**使用 AWS 管理控制台为 IAM 用户创建角色**

*   在控制台的导航窗格中，单击**角色**，然后单击**“创建角色”**。点击**创建角色**按钮，屏幕显示如下。

![Creating IAM Roles](../Images/f974b6c171b1527ff1b52c0edc1a1fbb.png)

*   指定您想要授予资源访问权限的帐户标识，然后点击**下一个权限**按钮。
*   如果您选择了选项**“需要外部标识”**意味着它允许来自第三方的用户访问资源。需要输入第三方管理员提供的**外部 ID** 。此条件会自动添加到允许用户承担角色的信任策略中。
*   如果您选择了选项**“需要 MFA”**用于将角色限制为提供多因素身份验证的用户。
*   选择要附加到角色的策略。策略包含指定他们可以采取的操作和他们可以访问的资源的权限。

![Creating IAM Roles](../Images/3a4214b136bfb5222be18bca4ef58ade.png)

*   在角色名称框中，输入角色名称和角色描述。

![Creating IAM Roles](../Images/050b4a5d5de622ed9b99fb60ae7d7110.png)

*   点击**创建角色**完成角色的创建。

**使用命令行界面为 IAM 用户创建角色**

当您使用控制台创建角色时，许多步骤已经为您完成。在命令行界面的情况下，您必须显式指定每个步骤。

要使用 CLI 创建跨帐户访问的角色，请使用以下命令:

*   创建角色:aws iam 创建-角色
*   将权限策略附加到角色:aws iam 放入角色策略

## 为第三方身份提供者(联盟)创建 IAM 角色

身份联合允许您为可以使用第三方身份提供者登录的用户访问 AWS 资源。要配置身份联合，您必须配置身份提供程序，然后创建一个 IAM 角色，该角色确定联合用户可以拥有的权限。

*   **网络身份联盟:**网络身份联盟提供对通过登录 facebook、Google、Amazon 或其他 Open ID 标准登录的 AWS 资源的访问。要使用网站身份联合进行配置，您必须首先创建和配置身份提供程序，然后创建决定联合用户权限的 IAM 角色。
*   **安全声明标记语言(SAML) 2.0 联盟:**基于 SAML 的联盟提供对使用 SAML 的组织中的 AWS 资源的访问。要配置基于 SAML 2.0 的联合，您必须首先创建和配置身份提供程序，然后创建 IAM 角色，该角色决定来自组织的联合用户将拥有的权限。

**使用 AWS 管理控制台为网络身份创建角色**

*   在 https://console.aws.amazon.com/iam/打开 IAM 控制台
*   在导航窗格中，单击**角色**，然后单击**创建角色**。
*   点击**创建角色**后，选择可信实体的类型，即**网络身份**

![Creating IAM Roles](../Images/58c2801c32484a1e2635c85ecbba0b55.png)

*   指定标识应用程序的客户端标识。
    *   如果要为亚马逊认知创建角色，请在“身份池标识”框中指定创建亚马逊认知应用程序时的身份池标识。
    *   如果要为单个 web 身份提供者创建角色，请在向身份提供者注册应用程序时指定该提供者提供的标识。
*   (可选)单击**添加条件**添加您的应用程序的用户使用角色授予的权限之前必须满足的附加条件。
*   现在，将权限策略附加到角色，然后单击**下一步:标记**。

![Creating IAM Roles](../Images/f857ab92bdb6dd5fc7d80b5fe51aa33f.png)

*   在角色名称框中，指定角色名称和角色描述

![Creating IAM Roles](../Images/f1e8eaf5c1b84697f99297ea77862552.png)

*   点击**创建角色**完成角色的创建过程。

**使用 AWS 管理控制台为基于 SAML 的 2.0 联盟创建角色**

*   在 https://console.aws.amazon.com/iam/打开 IAM 控制台
*   在控制台的导航窗格中，单击**角色**，然后单击**创建角色**
*   单击身份提供者访问的角色。
*   选择您要为“授权网络单点登录”或“授权应用编程接口访问”创建的角色类型。
*   选择要为其创建角色的 SAML 提供程序。
*   如果要为 API 访问创建角色，请从属性列表中选择属性。然后在值框中，输入要包含在角色中的值。它将对角色的访问限制为来自身份提供者的用户，身份提供者的 SAML 身份验证响应包括您选择的属性。
*   如果要添加更多属性相关条件，点击**添加条件**。
*   将权限策略附加到角色。
*   点击**创建角色**完成角色的创建过程。

**使用 AWS CLI 为联合用户创建角色**

要使用 AWS 命令行界面为联合用户创建角色，请使用以下命令:

**创建角色:** aws iam create-role

**要将权限附加到策略:** aws iam 附加角色策略或 aws iam put 角色策略

* * *