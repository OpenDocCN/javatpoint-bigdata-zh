# 存储帐户和 Blob 服务配置

> 原文:[https://www . javatpoint . com/azure-storage-account-and-blob-service-configuration](https://www.javatpoint.com/azure-storage-account-and-blob-service-configuration)

第一个关键配置领域与网络有关，网络是存储防火墙和虚拟网络。Azure 中的每个存储帐户都有自己的存储防火墙。在防火墙内，我们可以配置以下规则。

*   我们可以配置的一组规则是允许从特定虚拟网络连接。如果我们有一个 Azure 虚拟网络，我们可以在这里配置它，以启用来自工作负载的连接。
*   规则的第二个方面是 IP 地址范围。我们可以指定一个 IP 地址范围，在此范围内，我们不允许到存储帐户的连接访问数据。
*   第三个是启用来自某些 Azure 服务的连接。因此，我们可以通过允许来自可信 Azure 服务的连接的方式来指定异常。

我们需要记住，有一个与存储帐户相关联的存储防火墙，我们可以在其中配置三种类型的规则。

*   我们可以指定允许连接的虚拟网络。
*   我们可以从允许连接的地方指定允许的 IP 范围。
*   我们可以定义一些例外。

### 自定义域

我们可以配置一个自定义域来访问存储帐户中的数据块数据。默认端点将是存储帐户名*. blob . core . windows . net "*。但是作为替代，我们可以将我们的域作为默认存储帐户 URL。我们也可以配置我们的自定义域。我们需要将我们的自定义域指定为*“自定义域/容器/我的 blob”*来访问特定的 blob。

在使用自定义域时，我们需要了解两个基本限制。

*   所有 Azure 存储都不支持带有自定义域的 HTTPS。我们目前可以使用 Azure CDN 通过在 HTTPS 使用自定义域来访问 blobs。
*   存储帐户目前只支持每个帐户一个自定义域名。因此，对于该存储帐户中的所有服务，我们只能使用一个自定义域。

### 内容交付网络

Azure 内容交付网络(CDN)在战略位置缓存静态内容，为向用户交付内容提供最大吞吐量。因此，CDN 最关键的优势是以最佳方式向用户提供内容。让我们看看这是如何工作的。

![Storage account and Blob service configuration](../Images/6891ddef737894bbab23a4e31f714216.png)

我们假设 blob 存储位于澳大利亚地区。所以我们在北印度和南印度拥有大部分用户。在这种情况下，我们可以为北印度和南印度配置一个 CDN 配置文件。例如，假设一个北印度用户试图访问我们位于澳大利亚地区的 blob。所以首先，请求到达 CDN 位置。从 CDN 位置，请求将进一步到达澳大利亚地区的 blob。对于第一个用户，块内容将被复制到 CDN 位置，然后最终交付给北印度用户。但是，当下一个北印度用户试图访问该块时，他们将被重定向到 CDN 位置，并且内容将直接从北印度本身的该位置传递给他们，因为块内容已经缓存在 CDN 位置。

因此，从第二个用户开始，内容交付延迟显著降低。

**其他配置区域:**

有一些不同的配置领域，如性能层、访问层、复制策略、所需的安全传输等。

![Storage account and Blob service configuration](../Images/0aa0383e53d3dec195a9fe3e43a3b131.png)

一旦创建了存储帐户，其中一些就无法更改。例如-性能层，启用或禁用数据湖第 2 代。但是我们可以打开/关闭所需的安全传输，我们可以从热到冷，从冷到热的访问类型。我们可以更改 Azure 文件的复制策略和 Azure 活动目录身份验证。因此，我们可以更改特定的配置设置。

**为存储帐户配置自定义域。**

让我们看看如何为 Azure 存储帐户配置一个自定义域，并看看上面讨论的一些配置设置。

**步骤 1:** 登录您的存储帐户。单击资源组，然后单击您创建的存储帐户

**第二步:**我们上面讨论的第一件事是防火墙和虚拟网络。在这里，您可以配置要接受存储帐户连接的虚拟网络，也可以配置要接受连接的 IP 地址范围，还可以指定一些例外。例如，如果您打算允许受信任的 Microsoft 服务访问此存储帐户来放置日志或访问记录。因此，在这种情况下，您可以勾选此项，并且，如果您希望允许从任何网络读取存储日志，您可以勾选此项。所以这里有一些例外。

![Storage account and Blob service configuration](../Images/ac408865d4c734be4e621d4455a6242a.png)

**第三步:**其次，我们也讨论了 Azure CDN。您可以在这里配置内容传送网络端点。您可以配置一个 CDN 配置文件，并将该 CDN 端点映射到存储图标。

![Storage account and Blob service configuration](../Images/22312760f36c5a2f87363fed710ca7d8.png)
![Storage account and Blob service configuration](../Images/eb838a816472c787a3c268349db278ac.png)

### 自定义域

**第一步:**打开你的资源组，然后打开你的存储账号，点击自定义域选项卡，如下图所示。

![Storage account and Blob service configuration](../Images/a62544c35d057b50d44ca6b5c68ce15f.png)

**步骤 2:** 登录您的域提供商网站，然后点击域域名系统设置并创建一个 Cname 记录。

有两种方法可以做到:

您可以使用普通 Cname，也可以使用 asverify。

**步骤 3:** 选择一个 Cname 并分配一个子域名称，然后复制并粘贴从您的域(如 www.smaple.com)指向 akkiteststorage.blob.core.windows.net 的 blob 存储链接

**步骤 4:** 之后，在存储帐户的自定义域窗口的域文本框中填写您的子域名称。然后点击保存。

**第五步:**打开浏览器，填写你的自定义域名

现在，您可以看到存储在 blob 存储中的图像。

#### 注意:确保您需要的安全传输已被禁用正如我们前面所讨论的，Azure 中的自定义域不支持 HTTPS。

* * *