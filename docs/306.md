# 版本控制

> 原文:[https://www.javatpoint.com/aws-versioning](https://www.javatpoint.com/aws-versioning)

**版本化**是将一个对象的多种形式保存在同一个 S3 桶中的方法。版本控制可用于检索、保存和恢复 S3 存储桶中对象的每个版本。

例如，存储桶由两个具有相同密钥但版本号不同的对象组成，如 photo.jpg(版本号为 11)和 photo.jpg(版本号为 12)。

启用版本控制的存储桶允许您从删除或覆盖中恢复对象。它有两个目的:

*   如果您删除一个对象，而不是永久删除该对象，它会创建一个删除标记，成为对象的当前版本。
*   如果覆盖某个对象，它会创建该对象的新版本，并恢复该对象的以前版本。

#### 注意:一旦启用了存储桶的版本控制，就不能禁用它。您可以暂停版本控制。

版本控制状态可以应用于存储桶中的所有对象。一旦启用版本化状态，存储桶中的所有对象都将保持版本化，并为它们提供唯一的版本标识。**以下是重点:**

*   如果未启用版本控制状态，则对象的版本标识将设置为空。未启用版本控制时，现有对象不会更改或受到影响。
*   存储桶所有者可以暂停版本控制以停止对象版本。暂停版本控制时，现有对象不受影响。

**我们通过一个例子来理解版本化的概念。**

*   登录到 AWS 管理控制台。
*   转到 S3 服务。
*   否，点击**“创建桶”**创建新桶。

![AWS Versioning](../Images/7e8e0b52a071f1a2ed78e6c0ca356175.png)

*   输入必须唯一的存储桶名称。

![AWS Versioning](../Images/a8071e33b942e152f89e550877ed43e9.png)

*   点击**“创建”**按钮。

![AWS Versioning](../Images/d21ef025daed034b6519600a7c2bbea3.png)

在上面的屏幕中，我们观察到桶**“jtpbucket”**是用默认设置创建的，即桶和对象不是公共的。

*   现在，我想看看水桶里的一些物体；我们需要公开一个桶。移至**编辑公共访问设置**，取消所有设置，然后保存设置。

![AWS Versioning](../Images/6a83df95039f200734c2d383bb2fe9e7.png)

*   保存设置后，屏幕显示如下:

![AWS Versioning](../Images/26257ed5df6e3357fb860ba83acdd3c2.png)

在文本框中键入“确认”以确认设置。点击**“确认”**按钮。

*   确认设置后，屏幕显示如下:

![AWS Versioning](../Images/91fcdc4368a3c3fc1fba6d0621a243e2.png)

上图显示桶中的对象已经公开。

*   现在，我们将版本控制添加到桶中。移动到桶的属性，即 **jtpbucket** ，点击版本控制。

![AWS Versioning](../Images/f7087c98b6207fb6d5c2ae82f1177ca3.png)

*   点击版本控制，屏幕显示如下:

![AWS Versioning](../Images/f575c95a2ed8fb941c04e9191249aaa0.png)

我们可以启用或暂停版本控制。假设我们启用版本控制并保存此设置，这会将版本控制添加到桶中。

*   我们现在把文件上传到桶里。

![AWS Versioning](../Images/5e4645e659c52834821fbef213b70b2b.png)

*   现在，我们点击**“添加文件”**来添加我们桶中的文件。上传文件后，屏幕显示如下:

![AWS Versioning](../Images/ef5abec8ff96da36f3a5eec1674ee3b0.png)

在上面的屏幕中，我们观察到 version.txt 文件被上传。

*   要运行**版本. txt** 文件，我们必须从**操作**下拉菜单中将其公开。

![AWS Versioning](../Images/0cdef9b0989d8f83631977a85ab65de0.png)

*   当一个文件成为公共文件时，我们可以通过点击它的对象网址来运行该文件。点击对象网址，屏幕显示如下:

![AWS Versioning](../Images/c29dacbaf42f266be41e3b7cde606a14.png)

*   现在，我们创建文件的第二个版本。假设我更改了文件的内容并重新上传，那么它就变成了文件的第二个版本。

![AWS Versioning](../Images/85c64e1bdd72526e64e01c008f1e5e9c.png)

在上面的屏幕中，我们将内容从“版本 1”更改为“版本 2”，然后保存文件。

*   现在，我们将上述文件上传到我们的桶中。

![AWS Versioning](../Images/d1a68f3604041dc54e6f57a6e9f073a3.png)

*   上传文件后，会创建一个文件的两个版本。

![AWS Versioning](../Images/81f3935ca9e22047790dbcc90c721210.png)

从上面的屏幕中，我们观察到我们可以隐藏或显示版本。

*   当我们点击“显示”时，我们可以看到一个文件的所有版本。

![AWS Versioning](../Images/e8a5a700cf237c4648ef3bcf354ed643.png)

从上面的屏幕中，我们可以看到一个文件的版本和当前上传的文件都变成了最新版本。两个文件大小相同，即 18.0 B，存储类相同，即标准。

*   要运行**版本. txt** 文件，我们必须从**操作**下拉菜单中将其公开。
*   现在，移动到一个文件的属性，并点击对象的网址。

![AWS Versioning](../Images/a6be55ad7579f389b1e89e1e1cd1c447.png)

点击对象网址。

![AWS Versioning](../Images/7107e347669440fe508cb368128f700c.png)

*   点击对象网址，我们可以看到输出，即当前上传文件的内容。

![AWS Versioning](../Images/6fb66844148e9c1cef5eeec4b8d42482.png)

*   现在，我们删除一个对象。移至操作下拉菜单，点击删除。

![AWS Versioning](../Images/380633160ca70133b974875a33605fef.png)

*   删除对象时，屏幕显示如下:

![AWS Versioning](../Images/9df4ab20c50eabaf10dee116d1a3b977.png)

我们观察到桶变空了。

*   然而，当我们点击**显示**版本时，我们可以看到一个文件的所有版本，即删除标记和一个文件的其他两个版本。

![AWS Versioning](../Images/51675c88bed91c95a6f3dcac98f7c772.png)

我们从上面的屏幕中观察到，对象没有被永久删除；已经修复了。因此，版本控制概念用于恢复对象。

*   如果要恢复对象，点击动作下拉菜单，点击删除，删除**“删除标记”。**

![AWS Versioning](../Images/123ce4d7dfb5371947fb2b989eae60bc.png)

*   点击“隐藏”版本，我们会观察到文件已经恢复。

![AWS Versioning](../Images/0acbc2e773d634ae35b2122674762e95.png)

### 需要记住的要点:M

*   它存储对象的所有版本(包括所有写入，即使您删除了一个对象)。
*   这是一个很好的备份工具。
*   版本控制一旦启用，就不能禁用，只能挂起。
*   它与生命周期规则集成在一起。
*   版本控制的 MFA 删除功能使用多因素身份验证，可用于提供额外的安全层。

* * *