# IAM 角色用例

> 原文：<https://www.javatpoint.com/aws-iam-roles-use-cases>

使用角色有两种方式:

*   **IAM 控制台:**当在 IAM 控制台工作的 IAM 用户想要使用该角色时，则临时访问该角色的权限。IAM 用户放弃他们最初的权限并获得角色的权限。当 IAM 用户退出角色时，他们的原始权限将被恢复。
*   **编程访问:**诸如 Amazon EC2 实例之类的 AWS 服务可以通过使用对 AWS 的编程请求来请求临时安全凭证来使用角色。

IAM 角色可以通过以下方式使用:

*   **IAM 用户:** IAM 角色用于授予您的 IAM 用户访问您自己或不同帐户中的 AWS 资源的权限。IAM 用户可以使用 IAM 控制台使用附加到角色的权限。角色还可以防止对敏感 AWS 资源的意外访问。
*   **应用程序和服务:**您可以通过调用 AssumeRole API 函数来授予应用程序和服务对角色所附权限的访问权限。函数的作用是:返回一个与角色相关的临时安全证书。应用程序和服务只能采取角色允许的那些操作。应用程序不能像控制台中的 IAM 用户那样退出角色，而是停止使用临时凭据并恢复其原始凭据。
*   **联合用户:**联合用户可以使用身份提供者提供的临时凭据登录。AWS 向用户提供 IDP(身份提供者)和与角色相关联的临时凭证。凭据授予用户访问权限。

以下是角色的案例:

*   在一个 AWS 帐户中切换到 IAM 用户角色，以访问您拥有的另一个帐户中的资源。
    *   您可以授予您的 IAM 用户在您的 AWS 帐户或其他帐户中切换角色的权限。例如，您拥有对您的组织非常重要的亚马逊 EC2 实例。您可以创建一个具有权限的角色，允许管理员在需要终止实例时切换到该角色，而不是直接授予用户终止实例的权限。
    *   您必须明确授予用户承担该角色的权限。
    *   可以将多因素身份验证角色添加到该角色中，以便只有使用 MFA 登录的用户才能使用该角色。
    *   角色可以防止对敏感资源的意外更改，特别是如果您将它们与审核结合起来，以便角色只能在需要时使用。
    *   一个帐户中的 IAM 用户可以切换到相同或不同帐户中的角色。使用角色，用户可以访问角色允许的资源。当用户切换到该角色时，他们的原始权限将被取消。如果用户退出角色，他们的原始权限将被恢复。
*   提供对 AWS 服务的访问
    *   AWS 服务使用角色来访问 AWS 资源。
    *   每个服务在如何使用角色以及如何将角色分配给服务方面都是不同的。
    *   假设运行您的应用程序的 AWS 服务(如 Amazon EC2 实例)想要向 AWS 资源(如 Amazon S3 bucket)发出请求，该服务必须具有安全凭据才能访问这些资源。如果将安全凭据直接嵌入到实例中，那么将凭据分发到多个实例会带来安全风险。为了克服这些问题，您可以创建一个分配给 Amazon EC2 实例的角色，该角色授予访问资源的权限。
*   提供对外部认证用户的访问。
    有时用户在 AWS 之外有身份，比如在你的公司目录中。如果这样的用户想要使用 AWS 资源，那么他们应该知道安全凭证。在这种情况下，我们可以使用角色来指定第三方身份提供者(IDP)的权限。
    *   **基于 SAML 的联邦**
        SAML 2.0(安全断言标记语言 2.0)是许多身份提供者使用的开放框架。SAML 为用户提供了对 AWS 管理控制台的联合单点登录，因此用户可以登录到 AWS 管理控制台。
        基于 SAML 的联盟如何工作
    *   **Web-identity Federation**
        假设您正在创建一个移动应用程序，该应用程序可以访问 AWS 资源，例如在移动设备上运行的游戏，但信息是使用亚马逊 S3 和 DynamoDB 存储的。
        当你创建这样一个应用时，你需要向 AWS 服务提出请求，这些请求必须用 AWS 访问密钥签名。但是，建议不要使用长期 AWS 凭据，即使是加密形式也不要使用。应用程序必须请求临时安全凭据，这些凭据是在需要时使用网络身份联合动态创建的。这些临时安全凭据将映射到具有应用程序执行任务所需权限的角色。
        通过网络身份联盟，用户不需要任何自定义登录代码或用户身份。用户可以使用外部身份提供者登录，例如使用亚马逊、脸书、谷歌或其他开放身份登录。登录后，用户获得身份验证令牌，他们交换身份验证令牌以接收临时安全凭据。
*   **提供对第三方的访问**
    当第三方想要访问 AWS 资源时，您可以使用角色来委派对它们的访问。IAM 角色授予这些第三方访问 AWS 资源的权限，而无需共享任何安全凭据。
    **第三方提供以下信息创建角色:**
    *   第三方提供包含 IAM 用户的帐户标识来使用您的角色。为角色定义信任策略时，需要将 AWS 帐户标识指定为主体。
    *   第三方的外部标识用于与角色关联。您可以指定外部标识来定义角色的信任策略。
    *   这些权限由第三方用来访问 AWS 资源。权限与您定义信任策略时所扮演的角色相关联。该策略定义了他们可以采取的行动和可以使用的资源。

* * *